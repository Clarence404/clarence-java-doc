import{_ as s,c as n,a as e,o as l}from"./app-DuabcAmw.js";const p={};function i(t,a){return l(),n("div",null,a[0]||(a[0]=[e(`<h1 id="jvm-参数设置" tabindex="-1"><a class="header-anchor" href="#jvm-参数设置"><span>JVM 参数设置</span></a></h1><h2 id="堆-栈大小" tabindex="-1"><a class="header-anchor" href="#堆-栈大小"><span>堆/栈大小</span></a></h2><h3 id="堆内存参数" tabindex="-1"><a class="header-anchor" href="#堆内存参数"><span>堆内存参数</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token parameter variable">-Xms4g</span>          <span class="token comment"># 初始堆大小 4GB</span></span>
<span class="line"><span class="token parameter variable">-Xmx4g</span>          <span class="token comment"># 最大堆大小 4GB（建议与 -Xms 相同，避免动态扩容）</span></span>
<span class="line"><span class="token parameter variable">-XX:NewRatio</span><span class="token operator">=</span><span class="token number">2</span>  <span class="token comment"># 新生代:老年代 = 1:2</span></span>
<span class="line"><span class="token parameter variable">-XX:SurvivorRatio</span><span class="token operator">=</span><span class="token number">8</span>  <span class="token comment"># Eden:S0:S1 = 8:1:1</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="栈内存参数" tabindex="-1"><a class="header-anchor" href="#栈内存参数"><span>栈内存参数</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token parameter variable">-Xss512k</span>        <span class="token comment"># 每个线程栈大小 512KB</span></span>
<span class="line"><span class="token parameter variable">-XX:ThreadStackSize</span><span class="token operator">=</span><span class="token number">512</span>  <span class="token comment"># 等同于 -Xss</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="元空间参数" tabindex="-1"><a class="header-anchor" href="#元空间参数"><span>元空间参数</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token parameter variable">-XX:MetaspaceSize</span><span class="token operator">=</span>256m           <span class="token comment"># 元空间初始大小</span></span>
<span class="line"><span class="token parameter variable">-XX:MaxMetaspaceSize</span><span class="token operator">=</span>512m        <span class="token comment"># 元空间最大大小</span></span>
<span class="line"><span class="token parameter variable">-XX:CompressedClassSpaceSize</span><span class="token operator">=</span>1g  <span class="token comment"># 压缩类空间大小</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="gc-参数" tabindex="-1"><a class="header-anchor" href="#gc-参数"><span>GC 参数</span></a></h2><h3 id="gc-选择" tabindex="-1"><a class="header-anchor" href="#gc-选择"><span>GC 选择</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token parameter variable">-XX:+UseSerialGC</span>              <span class="token comment"># 使用 Serial GC</span></span>
<span class="line"><span class="token parameter variable">-XX:+UseParallelGC</span>            <span class="token comment"># 使用 Parallel GC</span></span>
<span class="line"><span class="token parameter variable">-XX:+UseG1GC</span>                  <span class="token comment"># 使用 G1 GC（JDK9+ 默认）</span></span>
<span class="line"><span class="token parameter variable">-XX:+UseZGC</span>                   <span class="token comment"># 使用 ZGC（JDK11+）</span></span>
<span class="line"><span class="token parameter variable">-XX:+UseShenandoahGC</span>          <span class="token comment"># 使用 Shenandoah GC（JDK12+）</span></span>
<span class="line"><span class="token parameter variable">-XX:+UseEpsilonGC</span>             <span class="token comment"># 使用 Epsilon GC（无 GC）</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="g1-参数" tabindex="-1"><a class="header-anchor" href="#g1-参数"><span>G1 参数</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token parameter variable">-XX:+UseG1GC</span>                           <span class="token comment"># 使用 G1</span></span>
<span class="line"><span class="token parameter variable">-XX:MaxGCPauseMillis</span><span class="token operator">=</span><span class="token number">200</span>              <span class="token comment"># 目标停顿时间 200ms</span></span>
<span class="line"><span class="token parameter variable">-XX:G1HeapRegionSize</span><span class="token operator">=</span>16m               <span class="token comment"># Region 大小（2MB-32MB）</span></span>
<span class="line"><span class="token parameter variable">-XX:InitiatingHeapOccupancyPercent</span><span class="token operator">=</span><span class="token number">45</span>  <span class="token comment"># 触发并发标记的堆占用率</span></span>
<span class="line"><span class="token parameter variable">-XX:G1ReservePercent</span><span class="token operator">=</span><span class="token number">10</span>                <span class="token comment"># 保留空间百分比</span></span>
<span class="line"><span class="token parameter variable">-XX:G1MixedGCCountTarget</span><span class="token operator">=</span><span class="token number">8</span>            <span class="token comment"># 混合 GC 目标次数</span></span>
<span class="line"><span class="token parameter variable">-XX:G1HeapWastePercent</span><span class="token operator">=</span><span class="token number">5</span>               <span class="token comment"># 堆浪费百分比</span></span>
<span class="line"><span class="token parameter variable">-XX:G1MixedGCLiveThresholdPercent</span><span class="token operator">=</span><span class="token number">85</span>   <span class="token comment"># 存活率阈值</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="zgc-参数" tabindex="-1"><a class="header-anchor" href="#zgc-参数"><span>ZGC 参数</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token parameter variable">-XX:+UseZGC</span>                      <span class="token comment"># 使用 ZGC</span></span>
<span class="line"><span class="token parameter variable">-XX:+ZGenerational</span>               <span class="token comment"># 启用分代（JDK21+）</span></span>
<span class="line"><span class="token parameter variable">-XX:ZCollectionInterval</span><span class="token operator">=</span><span class="token number">5</span>        <span class="token comment"># GC 间隔（秒）</span></span>
<span class="line"><span class="token parameter variable">-XX:ZAllocationSpikeTolerance</span><span class="token operator">=</span><span class="token number">5</span>  <span class="token comment"># 分配峰值容忍度</span></span>
<span class="line"><span class="token parameter variable">-XX:ConcGCThreads</span><span class="token operator">=</span><span class="token number">2</span>              <span class="token comment"># 并发 GC 线程数</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="parallel-参数" tabindex="-1"><a class="header-anchor" href="#parallel-参数"><span>Parallel 参数</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token parameter variable">-XX:+UseParallelGC</span>                <span class="token comment"># 使用 Parallel GC</span></span>
<span class="line"><span class="token parameter variable">-XX:ParallelGCThreads</span><span class="token operator">=</span><span class="token number">8</span>          <span class="token comment"># GC 线程数（默认：CPU 核数）</span></span>
<span class="line"><span class="token parameter variable">-XX:MaxGCPauseMillis</span><span class="token operator">=</span><span class="token number">200</span>          <span class="token comment"># 最大停顿时间</span></span>
<span class="line"><span class="token parameter variable">-XX:GCTimeRatio</span><span class="token operator">=</span><span class="token number">99</span>                <span class="token comment"># GC 时间占比（1/(1+99)=1%）</span></span>
<span class="line"><span class="token parameter variable">-XX:YoungGenerationSizeIncrement</span><span class="token operator">=</span><span class="token number">10</span>  <span class="token comment"># 年轻代增长比例</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="日志参数" tabindex="-1"><a class="header-anchor" href="#日志参数"><span>日志参数</span></a></h2><h3 id="jdk8-gc-日志" tabindex="-1"><a class="header-anchor" href="#jdk8-gc-日志"><span>JDK8 GC 日志</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token parameter variable">-XX:+PrintGCDetails</span>               <span class="token comment"># 输出详细 GC 日志</span></span>
<span class="line"><span class="token parameter variable">-XX:+PrintGCDateStamps</span>            <span class="token comment"># 输出 GC 日期时间戳</span></span>
<span class="line"><span class="token parameter variable">-XX:+PrintGCTimeStamps</span>            <span class="token comment"># 输出 GC 时间戳</span></span>
<span class="line">-Xloggc:/path/to/gc.log           <span class="token comment"># GC 日志文件路径</span></span>
<span class="line"><span class="token parameter variable">-XX:+UseGCLogFileRotation</span>         <span class="token comment"># 启用日志文件轮转</span></span>
<span class="line"><span class="token parameter variable">-XX:NumberOfGCLogFiles</span><span class="token operator">=</span><span class="token number">10</span>         <span class="token comment"># 保留的 GC 日志文件数量</span></span>
<span class="line"><span class="token parameter variable">-XX:GCLogFileSize</span><span class="token operator">=</span>10M             <span class="token comment"># 每个 GC 日志文件大小</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="jdk9-gc-日志" tabindex="-1"><a class="header-anchor" href="#jdk9-gc-日志"><span>JDK9+ GC 日志</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">-Xlog:gc*:file<span class="token operator">=</span>/path/to/gc.log:time,uptime,level,tags:filecount<span class="token operator">=</span><span class="token number">10</span>,filesize<span class="token operator">=</span>10M</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="其他日志参数" tabindex="-1"><a class="header-anchor" href="#其他日志参数"><span>其他日志参数</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token parameter variable">-verbose:gc</span>                       <span class="token comment"># 简单 GC 日志</span></span>
<span class="line"><span class="token parameter variable">-XX:+PrintGCDetails</span>               <span class="token comment"># 详细 GC 日志</span></span>
<span class="line"><span class="token parameter variable">-XX:+PrintHeapAtGC</span>                 <span class="token comment"># GC 时打印堆信息</span></span>
<span class="line"><span class="token parameter variable">-XX:+PrintStringDeduplicationStatistics</span>  <span class="token comment"># 字符串去重统计</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="诊断参数" tabindex="-1"><a class="header-anchor" href="#诊断参数"><span>诊断参数</span></a></h2><h3 id="堆转储" tabindex="-1"><a class="header-anchor" href="#堆转储"><span>堆转储</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token parameter variable">-XX:+HeapDumpOnOutOfMemoryError</span>    <span class="token comment"># OOM 时自动导出堆转储</span></span>
<span class="line"><span class="token parameter variable">-XX:HeapDumpPath</span><span class="token operator">=</span>/path/to/heapdump.hprof  <span class="token comment"># 堆转储文件路径</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="错误处理" tabindex="-1"><a class="header-anchor" href="#错误处理"><span>错误处理</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token parameter variable">-XX:OnError</span><span class="token operator">=</span><span class="token string">&quot;gdb -p %p&quot;</span>            <span class="token comment"># JVM 崩溃时执行命令</span></span>
<span class="line"><span class="token parameter variable">-XX:OnOutOfMemoryError</span><span class="token operator">=</span><span class="token string">&quot;kill -9 %p&quot;</span>  <span class="token comment"># OOM 时执行命令</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="其他诊断参数" tabindex="-1"><a class="header-anchor" href="#其他诊断参数"><span>其他诊断参数</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token parameter variable">-XX:+PrintConcurrentLocks</span>         <span class="token comment"># 打印并发锁信息</span></span>
<span class="line"><span class="token parameter variable">-XX:+PrintSafepointStatistics</span>     <span class="token comment"># 打印安全点统计</span></span>
<span class="line"><span class="token parameter variable">-XX:+PrintCommandLineFlags</span>        <span class="token comment"># 打印命令行参数</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="性能参数" tabindex="-1"><a class="header-anchor" href="#性能参数"><span>性能参数</span></a></h2><h3 id="jit-编译" tabindex="-1"><a class="header-anchor" href="#jit-编译"><span>JIT 编译</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token parameter variable">-XX:+UseTieredCompilation</span>         <span class="token comment"># 启用分层编译（默认开启）</span></span>
<span class="line"><span class="token parameter variable">-XX:CompileThreshold</span><span class="token operator">=</span><span class="token number">10000</span>         <span class="token comment"># 编译阈值</span></span>
<span class="line"><span class="token parameter variable">-XX:ReservedCodeCacheSize</span><span class="token operator">=</span>256m     <span class="token comment"># 代码缓存大小</span></span>
<span class="line"><span class="token parameter variable">-XX:+PrintCompilation</span>              <span class="token comment"># 打印编译信息</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="优化参数" tabindex="-1"><a class="header-anchor" href="#优化参数"><span>优化参数</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token parameter variable">-XX:+UseTLAB</span>                       <span class="token comment"># 启用 TLAB（默认开启）</span></span>
<span class="line"><span class="token parameter variable">-XX:+UseStringDeduplication</span>        <span class="token comment"># 启用字符串去重（G1）</span></span>
<span class="line"><span class="token parameter variable">-XX:+UseCompressedOops</span>             <span class="token comment"># 压缩普通对象指针（64位）</span></span>
<span class="line"><span class="token parameter variable">-XX:+UseCompressedClassPointers</span>    <span class="token comment"># 压缩类指针</span></span>
<span class="line"><span class="token parameter variable">-XX:+UseBiasedLocking</span>              <span class="token comment"># 启用偏向锁</span></span>
<span class="line"><span class="token parameter variable">-XX:+UseFastAccessorMethods</span>        <span class="token comment"># 优化访问器方法</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="内存分配" tabindex="-1"><a class="header-anchor" href="#内存分配"><span>内存分配</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token parameter variable">-XX:PretenureSizeThreshold</span><span class="token operator">=</span>16m     <span class="token comment"># 大对象直接进入老年代的阈值</span></span>
<span class="line"><span class="token parameter variable">-XX:MaxTenuringThreshold</span><span class="token operator">=</span><span class="token number">15</span>        <span class="token comment"># 对象晋升年龄</span></span>
<span class="line"><span class="token parameter variable">-XX:TargetSurvivorRatio</span><span class="token operator">=</span><span class="token number">50</span>         <span class="token comment"># Survivor 区目标使用率</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="其他参数" tabindex="-1"><a class="header-anchor" href="#其他参数"><span>其他参数</span></a></h2><h3 id="字符串去重" tabindex="-1"><a class="header-anchor" href="#字符串去重"><span>字符串去重</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token parameter variable">-XX:+UseStringDeduplication</span>        <span class="token comment"># 启用字符串去重（G1）</span></span>
<span class="line"><span class="token parameter variable">-XX:StringDeduplicationAgeThreshold</span><span class="token operator">=</span><span class="token number">3</span>  <span class="token comment"># 字符串去重年龄阈值</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="类加载" tabindex="-1"><a class="header-anchor" href="#类加载"><span>类加载</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token parameter variable">-XX:+TraceClassLoading</span>             <span class="token comment"># 跟踪类加载</span></span>
<span class="line"><span class="token parameter variable">-XX:+TraceClassUnloading</span>           <span class="token comment"># 跟踪类卸载</span></span>
<span class="line"><span class="token parameter variable">-XX:+PrintClassHistogram</span>           <span class="token comment"># 打印类直方图</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="线程" tabindex="-1"><a class="header-anchor" href="#线程"><span>线程</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token parameter variable">-XX:ParallelGCThreads</span><span class="token operator">=</span><span class="token number">8</span>            <span class="token comment"># GC 线程数</span></span>
<span class="line"><span class="token parameter variable">-XX:ConcGCThreads</span><span class="token operator">=</span><span class="token number">2</span>                <span class="token comment"># 并发 GC 线程数</span></span>
<span class="line"><span class="token parameter variable">-XX:CICompilerCount</span><span class="token operator">=</span><span class="token number">2</span>              <span class="token comment"># JIT 编译线程数</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="实战配置示例" tabindex="-1"><a class="header-anchor" href="#实战配置示例"><span>实战配置示例</span></a></h2><h3 id="通用配置-jdk11" tabindex="-1"><a class="header-anchor" href="#通用配置-jdk11"><span>通用配置（JDK11+）</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">java</span> <span class="token parameter variable">-Xms4g</span> <span class="token parameter variable">-Xmx4g</span> <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:+UseG1GC</span> <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:MaxGCPauseMillis</span><span class="token operator">=</span><span class="token number">200</span> <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:G1HeapRegionSize</span><span class="token operator">=</span>16m <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:InitiatingHeapOccupancyPercent</span><span class="token operator">=</span><span class="token number">45</span> <span class="token punctuation">\\</span></span>
<span class="line">     -Xlog:gc*:file<span class="token operator">=</span>/path/to/gc.log:time,uptime,level,tags:filecount<span class="token operator">=</span><span class="token number">10</span>,filesize<span class="token operator">=</span>10M <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:+HeapDumpOnOutOfMemoryError</span> <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:HeapDumpPath</span><span class="token operator">=</span>/path/to/heapdump.hprof <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-jar</span> app.jar</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="低延迟配置-jdk21" tabindex="-1"><a class="header-anchor" href="#低延迟配置-jdk21"><span>低延迟配置（JDK21+）</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">java</span> <span class="token parameter variable">-Xms8g</span> <span class="token parameter variable">-Xmx8g</span> <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:+UseZGC</span> <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:+ZGenerational</span> <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:ZCollectionInterval</span><span class="token operator">=</span><span class="token number">5</span> <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:ConcGCThreads</span><span class="token operator">=</span><span class="token number">2</span> <span class="token punctuation">\\</span></span>
<span class="line">     -Xlog:gc*:file<span class="token operator">=</span>/path/to/gc.log:time,uptime,level,tags:filecount<span class="token operator">=</span><span class="token number">10</span>,filesize<span class="token operator">=</span>10M <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:+HeapDumpOnOutOfMemoryError</span> <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:HeapDumpPath</span><span class="token operator">=</span>/path/to/heapdump.hprof <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-jar</span> app.jar</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="高吞吐配置-jdk8" tabindex="-1"><a class="header-anchor" href="#高吞吐配置-jdk8"><span>高吞吐配置（JDK8）</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">java</span> <span class="token parameter variable">-Xms4g</span> <span class="token parameter variable">-Xmx4g</span> <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:+UseParallelGC</span> <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:MaxGCPauseMillis</span><span class="token operator">=</span><span class="token number">200</span> <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:GCTimeRatio</span><span class="token operator">=</span><span class="token number">99</span> <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:+PrintGCDetails</span> <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:+PrintGCDateStamps</span> <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:+PrintGCTimeStamps</span> <span class="token punctuation">\\</span></span>
<span class="line">     -Xloggc:/path/to/gc.log <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:+UseGCLogFileRotation</span> <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:NumberOfGCLogFiles</span><span class="token operator">=</span><span class="token number">10</span> <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:GCLogFileSize</span><span class="token operator">=</span>10M <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:+HeapDumpOnOutOfMemoryError</span> <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:HeapDumpPath</span><span class="token operator">=</span>/path/to/heapdump.hprof <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-jar</span> app.jar</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="小内存配置" tabindex="-1"><a class="header-anchor" href="#小内存配置"><span>小内存配置</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">java</span> <span class="token parameter variable">-Xms512m</span> <span class="token parameter variable">-Xmx512m</span> <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:+UseSerialGC</span> <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-Xss256k</span> <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:MetaspaceSize</span><span class="token operator">=</span>64m <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:MaxMetaspaceSize</span><span class="token operator">=</span>128m <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:+PrintGCDetails</span> <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-XX:+PrintGCDateStamps</span> <span class="token punctuation">\\</span></span>
<span class="line">     -Xloggc:/path/to/gc.log <span class="token punctuation">\\</span></span>
<span class="line">     <span class="token parameter variable">-jar</span> app.jar</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="参数调优建议" tabindex="-1"><a class="header-anchor" href="#参数调优建议"><span>参数调优建议</span></a></h2><ol><li><strong>初始堆 = 最大堆</strong>：避免动态扩容带来的性能损耗。</li><li><strong>选择合适的 GC</strong>：根据场景选择 G1、ZGC 或 Parallel。</li><li><strong>设置合理的停顿时间</strong>：G1 的 MaxGCPauseMillis 不要设置过小。</li><li><strong>启用 GC 日志</strong>：便于问题排查和性能分析。</li><li><strong>启用堆转储</strong>：OOM 时自动导出堆快照。</li><li><strong>监控和调优</strong>：根据实际运行情况调整参数。</li></ol>`,56)]))}const c=s(p,[["render",i],["__file","06_jvm_parameters.html.vue"]]),o=JSON.parse('{"path":"/jvm/06_jvm_parameters.html","title":"JVM 参数设置","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"堆/栈大小","slug":"堆-栈大小","link":"#堆-栈大小","children":[{"level":3,"title":"堆内存参数","slug":"堆内存参数","link":"#堆内存参数","children":[]},{"level":3,"title":"栈内存参数","slug":"栈内存参数","link":"#栈内存参数","children":[]},{"level":3,"title":"元空间参数","slug":"元空间参数","link":"#元空间参数","children":[]}]},{"level":2,"title":"GC 参数","slug":"gc-参数","link":"#gc-参数","children":[{"level":3,"title":"GC 选择","slug":"gc-选择","link":"#gc-选择","children":[]},{"level":3,"title":"G1 参数","slug":"g1-参数","link":"#g1-参数","children":[]},{"level":3,"title":"ZGC 参数","slug":"zgc-参数","link":"#zgc-参数","children":[]},{"level":3,"title":"Parallel 参数","slug":"parallel-参数","link":"#parallel-参数","children":[]}]},{"level":2,"title":"日志参数","slug":"日志参数","link":"#日志参数","children":[{"level":3,"title":"JDK8 GC 日志","slug":"jdk8-gc-日志","link":"#jdk8-gc-日志","children":[]},{"level":3,"title":"JDK9+ GC 日志","slug":"jdk9-gc-日志","link":"#jdk9-gc-日志","children":[]},{"level":3,"title":"其他日志参数","slug":"其他日志参数","link":"#其他日志参数","children":[]}]},{"level":2,"title":"诊断参数","slug":"诊断参数","link":"#诊断参数","children":[{"level":3,"title":"堆转储","slug":"堆转储","link":"#堆转储","children":[]},{"level":3,"title":"错误处理","slug":"错误处理","link":"#错误处理","children":[]},{"level":3,"title":"其他诊断参数","slug":"其他诊断参数","link":"#其他诊断参数","children":[]}]},{"level":2,"title":"性能参数","slug":"性能参数","link":"#性能参数","children":[{"level":3,"title":"JIT 编译","slug":"jit-编译","link":"#jit-编译","children":[]},{"level":3,"title":"优化参数","slug":"优化参数","link":"#优化参数","children":[]},{"level":3,"title":"内存分配","slug":"内存分配","link":"#内存分配","children":[]}]},{"level":2,"title":"其他参数","slug":"其他参数","link":"#其他参数","children":[{"level":3,"title":"字符串去重","slug":"字符串去重","link":"#字符串去重","children":[]},{"level":3,"title":"类加载","slug":"类加载","link":"#类加载","children":[]},{"level":3,"title":"线程","slug":"线程","link":"#线程","children":[]}]},{"level":2,"title":"实战配置示例","slug":"实战配置示例","link":"#实战配置示例","children":[{"level":3,"title":"通用配置（JDK11+）","slug":"通用配置-jdk11","link":"#通用配置-jdk11","children":[]},{"level":3,"title":"低延迟配置（JDK21+）","slug":"低延迟配置-jdk21","link":"#低延迟配置-jdk21","children":[]},{"level":3,"title":"高吞吐配置（JDK8）","slug":"高吞吐配置-jdk8","link":"#高吞吐配置-jdk8","children":[]},{"level":3,"title":"小内存配置","slug":"小内存配置","link":"#小内存配置","children":[]}]},{"level":2,"title":"参数调优建议","slug":"参数调优建议","link":"#参数调优建议","children":[]}],"git":{"updatedTime":1771047071000,"contributors":[{"name":"hello0709","username":"hello0709","email":"1154937362@qq.com","commits":1,"url":"https://github.com/hello0709"}]},"filePathRelative":"jvm/06_jvm_parameters.md"}');export{c as comp,o as data};
